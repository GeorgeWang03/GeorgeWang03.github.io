<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>GeorgeWang Blog</title>
    <description>iOSã€åˆ›ä½œä¸è®¾è®¡ | ç‹é¢–ï¼ŒiOS Engineer | è¿™é‡Œæ˜¯ç‹é¢–çš„ä¸ªäººåšå®¢ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œåˆ†äº«æŠ€æœ¯ï¼Œåˆ†äº«è§é—»ï¼Œåˆ†äº«äººç”Ÿ</description>
    <link>http://blog.oneinbest.com/</link>
    <atom:link href="http://blog.oneinbest.com/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Mon, 26 Sep 2016 14:13:44 +0800</pubDate>
    <lastBuildDate>Mon, 26 Sep 2016 14:13:44 +0800</lastBuildDate>
    <generator>Jekyll v3.2.1</generator>
    
      <item>
        <title>å…³äºæˆ‘çš„åšå®¢è¯´æ˜</title>
        <description>&lt;p&gt;è¿™æ˜¯æˆ‘çš„æ–°åšå®¢ï¼ŒåŸºäºgitpageå’Œjekyllæ­å»ºã€‚&lt;/p&gt;

&lt;p&gt;ä½ å¯èƒ½ä¼šçœ‹åˆ°æœ‰äº›æ–‡ç« æ¯”æˆ‘åšå®¢é¡¹ç›®æ—¶é—´è¿˜æ—©ï¼Œè¿™æ˜¯å› ä¸ºå¾ˆå¤šæ–‡ç« æ˜¯ä»ä»¥å‰çš„&lt;a href=&quot;&amp;quot;www.oneinbset.com&amp;quot;&quot;&gt;åšå®¢&lt;/a&gt;è¿è¿‡æ¥çš„ï¼Œæ˜¯ä»¥å‰å†™çš„ï¼Œä¸èˆå¾—æ”¾å¼ƒï¼Œæ‰€ä»¥è¿è¿‡æ¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘æ¯”è¾ƒå–œæ¬¢æŠ˜è…¾ï¼Œä»ä¸€å¼€å§‹åœ¨csdnå†™åšå®¢ï¼Œå‘ç°ä¸å°½æˆ‘æ„ï¼Œåˆè‡ªå·±ä¹°äº†ä¸€ä¸ªä¸»æœºå’ŒåŸŸåï¼Œä½¿ç”¨wpæ­å»ºä¸€ä¸ªåšå®¢ï¼Œç°åœ¨ç”±äºwpæ¯”è¾ƒç¬¨é‡ï¼ŒåŠ ä¸Šæ‰€è´­ä¹°çš„ä¸»æœºç©ºé—´æœ‰é™ï¼Œæœæ–­æŠ›å¼ƒä¹‹ï¼Œä½¿ç”¨æ›´åŠ è½»é‡çº§çš„jekyllå’Œç©ºé—´æ— é™çš„gitpageã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼Œæˆ‘ä¼šå°½æˆ‘æ‰€èƒ½ï¼ŒæŠŠæˆ‘è§‰å¾—æœ‰æ„ä¹‰æœ‰ä»·å€¼çš„äº‹æƒ…è®°å½•ä¸‹æ¥ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘çš„åŠ¨åŠ›ï¼Œè°¢è°¢ï¼ğŸ»ğŸ»&lt;/p&gt;
</description>
        <pubDate>Thu, 22 Sep 2016 07:39:00 +0800</pubDate>
        <link>http://blog.oneinbest.com/2016/09/22/%E5%85%B3%E4%BA%8E%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E8%AF%B4%E6%98%8E/</link>
        <guid isPermaLink="true">http://blog.oneinbest.com/2016/09/22/%E5%85%B3%E4%BA%8E%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2%E8%AF%B4%E6%98%8E/</guid>
        
        <category>åšå®¢è¯´æ˜</category>
        
        
      </item>
    
      <item>
        <title>iOSä¸­çš„KVOæœºåˆ¶å‰–æ</title>
        <description>&lt;p&gt;KVOå³ key value observingé”®å€¼å¯¹è§‚å¯Ÿï¼Œæ˜¯objcä¸­çš„ä¸€ç§æœºåˆ¶ã€‚
KVOä»¥KVC(key value coding)ä¸ºåŸºç¡€ï¼Œé€šè¿‡å‘å¯¹è±¡çš„æŸä¸ªé”®å€¼æ·»åŠ è§‚å¯Ÿè€…ï¼Œå½“å¯¹è±¡é”®æ‰€å¯¹åº”çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥è§‚å¯Ÿè€…ï¼Œæ‰§è¡Œç›¸å…³çš„å›è°ƒæ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹æè¿°åˆ†ä¸ºKVOçš„ä½¿ç”¨ï¼ŒOBJCå®ç°KVOæœºåˆ¶çš„å‰–æï¼ŒKVOçš„DIYï¼Œfbçš„KVOå¼€æºåº“ä»‹ç»ï¼Œå››éƒ¨åˆ†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Tips:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	KVOçš„æ“ä½œå›è°ƒæ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­è¿›è¡Œçš„ï¼Œå’ŒNOTIFICATIONä¸€æ ·
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;kvo&quot;&gt;1. KVOçš„ä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;objcä¸­ç»™å¯¹è±¡é”®å€¼æ·»åŠ è§‚å¯Ÿè€…ï¼Œé€šè¿‡ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[obj addObserver:forKeyPath:option:context:]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å›è°ƒå‡½æ•°ï¼šâ€¨&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;observeValueForKeyPath:ofObject:change:context:
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç§»é™¤é€šçŸ¥ï¼š(è¿™æ˜¯ä¸€å®šè¦çš„ï¼Œä¸ç„¶ä¼šå¯¼è‡´crash)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;removeObserver:forKeyPath:
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;objckvo&quot;&gt;2. OBJCå®ç°KVOæœºåˆ¶çš„å‰–æ&lt;/h2&gt;
&lt;p&gt;å…ˆè´´ä¸Šå‡ ä¸ªè§£ææ¥æºï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1.&lt;a href=&quot;&amp;quot;https://github.com/ChenYilong/iOSInterviewQuestions&amp;quot;&quot;&gt;ã€Šæ‹›è˜ä¸€ä¸ªé è°±çš„iOSã€‹é¢è¯•é¢˜&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2.&lt;a href=&quot;&amp;quot;https://www.mikeash.com/pyblog/friday-qa-2009-01-23.html&amp;quot;&quot;&gt;https://www.mikeash.com/pyblog/friday-qa-2009-01-23.html&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;objcé€šè¿‡ä»€ä¹ˆæ¥å®ç°å¯¹é”®å€¼æ·»åŠ è§‚å¯Ÿè€…å¹¶å‘é€é€šçŸ¥å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;objcåŸºäºruntime,ä»¥setteræ–¹æ³•ä¸ºå…¥å£ï¼Œå®ç°è¿™ä¸€æœºåˆ¶ã€‚
é¦–å…ˆéœ€è¦çŸ¥é“çš„æ˜¯ï¼Œobjcçš„å¯¹è±¡å®ä¾‹isaæŒ‡é’ˆï¼Œå†…å­˜å¸ƒå±€ï¼ŒClassç»“æ„ä½“è¡¨ç¤ºç±»ã€‚&lt;/p&gt;

&lt;p&gt;å½“å‘å¯¹è±¡æ·»åŠ é”®å€¼è§‚å¯Ÿè€…æ—¶ï¼Œobjcé€šè¿‡runtimeåŠ¨æ€ç”Ÿæˆå¯¹è±¡æ‰€å±çš„ç±»çš„å­ç±»ï¼Œé‡å†™setterï¼Œå¹¶å°†å¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘æ–°ç±»ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­è¿˜é‡å†™äº†å­ç±»çš„classæ–¹æ³•ï¼Œå‘å¼€å‘è€…éšè—æ–°å»ºå­ç±» (ä¹Ÿå°±æ˜¯æ‰€è°“çš„isaæ··å†™(isa-swizzling))ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨æ–°çš„ç±»çš„setterä¸­ï¼Œæ‰§è¡Œï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[super setObject:]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¹¶åœ¨å‰åæ‰§è¡Œï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[self willChangeValueForKey:]ä¸[self didChangeValueForKey:]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¹¶åœ¨åè€…æ‰§è¡Œæ—¶è°ƒç”¨è§‚å¯Ÿè€…çš„å›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥åœ¨è§‚å¯Ÿè€…deallocæ—¶å¿…é¡»æ³¨é”€æ‰€è®¾ç½®çš„è§‚å¯Ÿï¼Œå¦åˆ™ä¼šå‘é€æ¶ˆæ¯ç»™deallocå¯¹è±¡ï¼Œé€ æˆcrashã€‚&lt;/p&gt;

&lt;p&gt;##3. KVOçš„DIY
ç…§ä¾‹è´´ä¸Šæ‰‹åŠ¨å®ç°KVOçš„æ–¹æ³•é“¾æ¥ï¼š&lt;a href=&quot;&amp;quot;http://tech.glowing.com/cn/implement-kvo/&amp;quot;&quot;&gt;http://tech.glowing.com/cn/implement-kvo/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;é€šè¿‡ä¸Šé¢çš„å‰–æï¼Œæˆ‘ä»¬çŸ¥é“äº†KVOçš„å®ç°åŸç†&lt;/p&gt;

&lt;p&gt;å¦‚æœè¦æ‰‹åŠ¨å®ç°ï¼Œé‚£æœ‰ä¸¤ä¸ªè¿‡ç¨‹å¿…é¡»å®ç°&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1.æ·»åŠ è§‚å¯Ÿè€…æ¥å£åŠè¿‡ç¨‹
2.é”®å€¼æ”¹å˜æ—¶çš„é€šçŸ¥è¿‡ç¨‹å®ç°
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;1.æ·»åŠ è§‚å¯Ÿè€…æ¥å£åŠè¿‡ç¨‹&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1.1 æ£€æŸ¥å¯¹è±¡çš„ç±»æœ‰æ²¡æœ‰ç›¸åº”setteræ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼›
	æ£€æŸ¥å¯¹è±¡ isa æŒ‡å‘çš„ç±»æ˜¯ä¸æ˜¯ä¸€ä¸ªæœ‰kPGKVOClassPrefixå‰ç¼€çš„KVOç±»ï¼Œå¦‚æœä¸æ˜¯éœ€è¦åˆ›å»ºæ–°å­ç±»ï¼Œå¹¶æŠŠisaæŒ‡é’ˆæŒ‡å‘æ–°ç±»ï¼Œå®ç°classæ–¹æ³•

1.2 æ£€æŸ¥æœ‰æ²¡æœ‰KVOçš„setteræ–¹æ³•ï¼Œæ²¡æœ‰çš„è¯æ„å»ºæ–°ç±»çš„setteræ–¹æ³•

1.3 æŠŠè§‚å¯Ÿè€…æ·»åŠ åˆ°è§‚å¯Ÿè€…åˆ—è¡¨ï¼Œä½¿ç”¨***å…³è”å¯¹è±¡(objc_setAssociationObj)*** ç»‘å®šåˆ—è¡¨
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;2.é”®å€¼æ”¹å˜æ—¶çš„é€šçŸ¥è¿‡ç¨‹å®ç°&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2.1 é€šè¿‡runtimeåŠ¨æ€æ‰§è¡Œçˆ¶ç±»ä¹Ÿå°±æ˜¯åŸæ¥çš„ç±»çš„setteræ–¹æ³•

2.2 å–å‡ºæœ‰å…³keyPathçš„è§‚å¯Ÿè€…ï¼Œå¹¶é€ä¸€è°ƒç”¨å›è°ƒå‡½æ•°block
â€¨â€¨##4.KVOController
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ğŸ‘‰ &lt;a ref=&quot;&quot;&gt;FaceBookçš„KVOControlleré“¾æ¥&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;KVOControlleræ˜¯Facebookå¼€æºçš„ä¸€ä¸ªKVOåº“ï¼Œå…¶å¯ä»¥èšåˆKVOæ“ä½œï¼Œä½¿ç”¨blockæ‰§è¡Œè§‚å¯Ÿæ“ä½œï¼Œå¥½å¤„æ˜¯å¯ä»¥ä¸ç”¨è‡ªå·±å»removeè§‚å¯Ÿè€…ï¼Œé˜²æ­¢å› ä¸ºå¿˜è®°removeé€ æˆcrashï¼Œä»¥ä¸‹æ˜¯å…¶ç”¨æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;
// create KVO controller with observer
FBKVOController *KVOController = [FBKVOController controllerWithObserver:self];
self.KVOController = KVOController;

// observe clock date property
[self.KVOController observe:clock keyPath:@&quot;date&quot; options:NSKeyValueObservingOptionInitial|NSKeyValueObservingOptionNew block:^(ClockView *clockView, Clock *clock, NSDictionary *change) {

  // update clock view with new value
  clockView.date = change[NSKeyValueChangeNewKey];
}];
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;section&quot;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;KVO&lt;/strong&gt; æ˜¯objcä¸€é¡¹é‡è¦çš„ç‰¹æ€§å’Œè®¾è®¡æ¨¡å¼ï¼Œä¹Ÿæ˜¯GOFè§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ã€‚å¼€å‘ä¸­ç»å¸¸ç”¨äºè§‚å¯Ÿæ•°æ®å±‚(data)å˜åŒ–è€Œå¯¹è§†å›¾å±‚(view)ä½œå‡ºç›¸åº”çš„æ”¹å˜ï¼Œä¹Ÿæ˜¯ä¸€ç§å“åº”æ–¹å¼ã€‚ç”±äºå…¶éœ€è¦æ‰‹åŠ¨ç§»åŠ¨è§‚å¯Ÿï¼Œå¦åˆ™ä¼šå¯¼è‡´crashï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶éœ€è¦å°å¿ƒã€‚Facebookçš„KVOControllerå¯¹objcçš„KVOè¿›è¡Œå°è£…ï¼Œä½¿ç”¨blockæ¨¡å¼ï¼Œè®©å¼€å‘è€…æ›´çœå¿ƒã€‚KVOåœ¨objcçš„åº•å±‚å®ç°æ˜¯isaæ··ç¼–ï¼Œç”Ÿæˆå­ç±»å¹¶é‡å†™setterï¼Œç„¶åé€šçŸ¥è§‚å¯Ÿä¸­ã€‚æ‰‹åŠ¨å®ç°KVOéœ€è¦å¯¹ç±»åšæ˜¯å¦KVOå­ç±»çš„åˆ¤æ–­ï¼Œä»è€Œå†³å®šæ˜¯å¦ç”Ÿæˆå­ç±»ã€‚æ€»è€Œè¨€ä¹‹ï¼ŒKVOæ˜¯objcä¸­ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„è¯­è¨€ç‰¹æ€§ï¼Œä½¿ç”¨å¥½å®ƒï¼Œèƒ½ä¸ºä½ å¸¦æ¥ä¸å°çš„å¥½å¤„ã€‚&lt;/p&gt;
</description>
        <pubDate>Wed, 23 Dec 2015 07:39:00 +0800</pubDate>
        <link>http://blog.oneinbest.com/2015/12/23/iOS%E4%B8%AD%E7%9A%84KVO%E6%9C%BA%E5%88%B6/</link>
        <guid isPermaLink="true">http://blog.oneinbest.com/2015/12/23/iOS%E4%B8%AD%E7%9A%84KVO%E6%9C%BA%E5%88%B6/</guid>
        
        <category>iOS</category>
        
        <category>KVO</category>
        
        
      </item>
    
  </channel>
</rss>
